<!-- app/views/onboardings/fields/_color_palette.html.erb -->
<div class="w-full">
  <%= form.label field[:name], field[:label], class: "block text-sm font-semibold text-gray-700 mb-4" %>
  
  <!-- Color Palette Grid -->
  <div class="grid grid-cols-4 sm:grid-cols-6 gap-3 mb-6">
    <% field[:options].each_with_index do |color, idx| %>
      <% element_id = "#{field[:name]}_#{color.gsub('#', '')}" %>
      
      <div class="relative">
        <%= form.radio_button field[:name], color, 
            id: element_id, 
            class: "peer sr-only",
            checked: idx == 0,
            required: field[:required],
            data: { action: "change->onboarding#updateColor" } 
        %>
        
        <label 
          for="<%= element_id %>"
          class="block w-12 h-12 sm:w-14 sm:h-14 rounded-2xl cursor-pointer transition-all duration-200 ring-2 ring-transparent ring-offset-2 ring-offset-purple-50 hover:scale-110 peer-checked:ring-4 peer-checked:ring-offset-4 peer-checked:scale-110 shadow-lg"
          style="background-color: <%= color %>; box-shadow: 0 4px 14px <%= color %>40;"
        >
          <span class="sr-only">Color <%= color %></span>
          <!-- Checkmark for selected -->
          <div class="hidden peer-checked:flex w-full h-full items-center justify-center">
            <svg class="w-6 h-6 text-white drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
        </label>
      </div>
    <% end %>
  </div>

  <!-- Store Preview -->
  <div class="mt-6">
    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Vista previa de tu tienda</p>
    
    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
      <!-- Browser chrome -->
      <div class="bg-gray-100 px-4 py-2.5 flex items-center gap-3 border-b border-gray-200">
        <div class="flex gap-1.5">
          <div class="w-3 h-3 rounded-full bg-red-400"></div>
          <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
          <div class="w-3 h-3 rounded-full bg-green-400"></div>
        </div>
        <div class="flex-1 bg-white rounded-lg px-3 py-1 text-xs text-gray-400 text-center">
          shopy.mx/<span data-onboarding-target="slugPreview">tu-tienda</span>
        </div>
      </div>
      
      <!-- Store Preview Content -->
      <div class="flex flex-col">
        <!-- Store Header with color -->
        <div 
          class="h-14 px-4 flex items-center justify-between text-white transition-colors duration-300" 
          data-onboarding-target="colorPreview" 
          style="background-color: #4F46E5;"
        >
          <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-white/20 rounded-lg"></div>
            <div class="w-16 h-3 bg-white/30 rounded"></div>
          </div>
          <div class="flex gap-2">
            <div class="w-6 h-6 bg-white/20 rounded-full"></div>
            <div class="w-6 h-6 bg-white/20 rounded-full"></div>
          </div>
        </div>

        <!-- Hero Section -->
        <div class="p-6 bg-gradient-to-b from-gray-50 to-white">
          <div class="text-center space-y-3">
            <div class="w-24 h-3 bg-gray-200 rounded mx-auto"></div>
            <div class="w-40 h-2 bg-gray-100 rounded mx-auto"></div>
            
            <!-- CTA Button with color -->
            <div 
              class="inline-block p-3 text-white text-xs font-medium rounded-xl shadow-md items-center justify-center mx-auto mt-3 transition-colors duration-300" 
              data-onboarding-target="colorPreview" 
              style="background-color: #4F46E5;"
            >
              Ver productos
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
